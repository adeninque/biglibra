{% extends 'cms/base.html' %}
{% load cms_tags %}

{% block content %}
<div class="container-md mt-3">
  <!-- Add Book Button -->
  <form method="get">
    <div class="input-group mb-2">
      <input class="form-control" type="search" name="q" placeholder="what book are you looking for ?">
      <button class="input-group-text d-inline-block btn btn-primary">search</button>
    </div>
    <!-- hidden input whith value q from GET, to not lose page on redirect -->
    <input type="hidden" name="page" value="{{ page_obj.number }}">
  </form>
  <a class="btn btn-primary w-100 fs-4 text-uppercase fw-bold" href="{% url 'cms_add_book' %}">Add Book</a>


  <!-- Lising all books -->
  <h2 class="mt-3">All Books:</h2>
  <div class="row m-0">
    <div class="col-8 p-0 text-uppercase">title</div>
    <div class="col-2 p-0 text-uppercase">copies</div>
    <div class="col-2 p-0 text-uppercase">available</div>
  </div>
  <div>
    {% for b in books %}
      {% book_card_inline b %}
    {% endfor %}
  </div>
  


  <!-- Pagination -->
  {% if page.obj.num_pages != 1 %}
  <p class="mt-5 border-top">Only one page</p>
  {% else %}
  <nav class="mt-5 d-flex border-top" >
    <p class="p-2 d-inline-block m-0 border rounded-3">
      Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </p>
    <form method="GET" class="d-flex ms-1 px-2">
      <!-- hidden input whith value q from GET, to not lose query on redirect -->
      <input type="hidden"
        value="{{ request.GET.q }}"
        name="q">

      <input
        type="number"
        class="form-control"
        placeholder="Page"
        max={{ page_obj.paginator.num_pages }}
        min=1
        name="page">
      <button type="submit" class="btn btn-primary">Go</button>
    </form>
  </nav>
  {% endif %}
</div>
{% endblock content %}